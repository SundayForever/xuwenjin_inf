package cn.com.alo7.inf.service.impl;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.data.domain.Example;
import org.springframework.data.domain.ExampleMatcher;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.stereotype.Service;

import cn.com.alo7.inf.common.Constant;
import cn.com.alo7.inf.common.utils.PageUtils;
import cn.com.alo7.inf.entity.VColumnVideo;
import cn.com.alo7.inf.repository.VColumnVideoRepository;
import cn.com.alo7.inf.service.IVColumnVideoService;

@Service
public class VColumnVideoServiceImpl implements IVColumnVideoService{

	@Autowired
	private VColumnVideoRepository vColumnVideoRepository;

	@Override
	public Page<VColumnVideo> findAll(Long columnId,Integer page, Integer size, String sort) {
		if(null == sort || "".equals(sort)){
			sort = Constant.SORT_MANUAL;
		}
		//分页对象
		Pageable pageable = PageUtils.page(page, size,null);
		//创建查询条件数据对象
		VColumnVideo vColumnVideo = new VColumnVideo();
		vColumnVideo.setSort(sort);
		vColumnVideo.setColumnId(columnId);
		//创建匹配器
		ExampleMatcher matcher = ExampleMatcher.matching();
		
		Example<VColumnVideo> ex = Example.of(vColumnVideo, matcher); 

		Page<VColumnVideo> pageList = vColumnVideoRepository.findAll(ex, pageable);
		return pageList;
	}

	
	
	
}
